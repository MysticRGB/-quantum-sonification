
<!DOCTYPE html>
<html>
<head>
  <title>Quantum Sonification</title>
  <script src="https://unpkg.com/tone@latest/build/Tone.js"></script>
  <style>
    body {
      background: #0b0c10;
      color: #ffffff;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 40px;
    }
    .element-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .element-buttons button {
      padding: 10px 20px;
      border-radius: 6px;
      border: 2px solid #66fcf1;
      background: #0d1a2d;
      color: #66fcf1;
      font-size: 16px;
      cursor: pointer;
    }
    .element-buttons button.active {
      background: #66fcf1;
      color: #0b0c10;
    }
    .spectrum {
      margin-top: 40px;
      height: 120px;
      position: relative;
      background: #111;
      border: 1px solid #333;
    }
    .line {
      position: absolute;
      bottom: 0;
      width: 4px;
      border-radius: 2px;
      animation: pulse 0.8s ease-in-out infinite alternate;
    }
    @keyframes pulse {
      from { transform: scaleY(0.8); opacity: 0.6; }
      to { transform: scaleY(1.2); opacity: 1; }
    }
  </style>
</head>
<body>
  <h1>Quantum Sonification</h1>
  <div class="element-buttons" id="elementButtons"></div>
  <button onclick="playSpectrum()">üéµ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏</button>
  <div id="spectrumDisplay" class="spectrum"></div>

  <script>
    const elements = ['H','He','Li','Be','B','C','N','O','F','Ne','Na','Mg','Al','Si','P','S','Cl','Ar','K','Ca'];
    const spectrumData = {
      H: [{ wavelength: 656.28, intensity: 1.0 }],
      He: [{ wavelength: 447.15, intensity: 1.0 }],
      Li: [{ wavelength: 670.78, intensity: 1.0 }],
      Be: [{ wavelength: 313.04, intensity: 0.9 }],
      B: [{ wavelength: 249.67, intensity: 0.85 }],
      C: [{ wavelength: 247.86, intensity: 1.0 }],
      N: [{ wavelength: 174.27, intensity: 0.9 }],
      O: [{ wavelength: 630.0, intensity: 1.0 }],
      F: [{ wavelength: 685.6, intensity: 0.7 }],
      Ne: [{ wavelength: 585.2, intensity: 1.0 }],
      Na: [{ wavelength: 589.0, intensity: 1.0 }],
      Mg: [{ wavelength: 285.2, intensity: 1.0 }],
      Al: [{ wavelength: 396.15, intensity: 0.9 }],
      Si: [{ wavelength: 288.16, intensity: 1.0 }],
      P: [{ wavelength: 253.4, intensity: 0.8 }],
      S: [{ wavelength: 246.1, intensity: 0.9 }],
      Cl: [{ wavelength: 837.59, intensity: 0.75 }],
      Ar: [{ wavelength: 696.54, intensity: 1.0 }],
      K: [{ wavelength: 766.5, intensity: 1.0 }],
      Ca: [{ wavelength: 422.67, intensity: 1.0 }]
    };
    let selectedElement = 'H';

    const buttonsContainer = document.getElementById("elementButtons");
    elements.forEach(el => {
      const btn = document.createElement("button");
      btn.textContent = el;
      btn.onclick = () => selectElement(el);
      buttonsContainer.appendChild(btn);
    });

    function selectElement(el) {
      selectedElement = el;
      document.querySelectorAll(".element-buttons button").forEach(b => b.classList.remove("active"));
      const btn = [...document.querySelectorAll(".element-buttons button")].find(b => b.textContent === el);
      if (btn) btn.classList.add("active");
      showSpectrum(spectrumData[el]);
    }

    function wavelengthToColor(wavelength) {
      if (wavelength >= 380 && wavelength <= 440) return '#8B00FF';
      if (wavelength > 440 && wavelength <= 490) return '#0000FF';
      if (wavelength > 490 && wavelength <= 510) return '#00FFFF';
      if (wavelength > 510 && wavelength <= 580) return '#00FF00';
      if (wavelength > 580 && wavelength <= 645) return '#FFFF00';
      if (wavelength > 645 && wavelength <= 750) return '#FF0000';
      return '#FFFFFF';
    }

    function wavelengthToFreq(wavelengthNm) {
      const c = 299792458;
      const wavelengthM = wavelengthNm * 1e-9;
      const freqHz = c / wavelengthM;
      const baseFreq = Math.log10(freqHz);
      return 440 * Math.pow(2, baseFreq - 14);
    }

    function showSpectrum(lines) {
      const container = document.getElementById("spectrumDisplay");
      container.innerHTML = "";
      const minW = 380, maxW = 750;
      lines.forEach(line => {
        if (line.wavelength < minW || line.wavelength > maxW) return;
        const bar = document.createElement("div");
        bar.classList.add("line");
        const pos = ((line.wavelength - minW) / (maxW - minW)) * 100;
        bar.style.left = `${pos}%`;
        bar.style.height = `${line.intensity * 100}px`;
        bar.style.background = wavelengthToColor(line.wavelength);
        container.appendChild(bar);
      });
    }

    function playSpectrum() {
      const lines = spectrumData[selectedElement];
      const synth = new Tone.PolySynth(Tone.Synth).toDestination();
      Tone.start();
      lines.forEach((line, index) => {
        const freq = wavelengthToFreq(line.wavelength);
        synth.triggerAttackRelease(freq, "2n", `+${index * 0.3}`, line.intensity);
      });
    }

    selectElement('H');
  </script>
</body>
</html>
